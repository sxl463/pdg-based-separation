#! -*- python -*-
#
# Copyright (c) 2011 The Native Client Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import make_nacl_env
import nacl_utils
import os

# nacl_env = make_nacl_env.NaClEnvironment(
#    use_c_plus_plus_libs=True, nacl_platform=os.getenv('NACL_TARGET_PLATFORM'))

nacl_env = make_nacl_env.NaClEnvironment(
    toolchain_arch='x86',
    nacl_platform=os.getenv('NACL_TARGET_PLATFORM'), 
    use_ppapi=False)

chfn=nacl_env.AllNaClModules(['chfn.c'], 'chfn')
build=nacl_env.Alias('build', [chfn])

cfg = ARGUMENTS.get('config', './default.cfg') # the default name of the configuration file is cfg
load=nacl_env.Command('load', None, os.getenv('UPRO_LOADER') + ' -m ' + cfg)

nacl_env.Default([build,load])
